"use strict";function $asyncbind(n,e){function t(){return r.apply(n,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:$asyncbind,enumerable:!1,configurable:!0,writable:!0}),$asyncbind.trampoline||($asyncbind.trampoline=function(n,e,t,r,i){return function c(o){for(;o;){if(o.then)return o=o.then(c,r),i?void 0:o;try{if(o.pop){if(o.length)return o.pop()?e.call(n):o;o=t}else o=o.call(n)}catch(n){return r(n)}}}}),$asyncbind.LazyThenable||($asyncbind.LazyThenable=function(){function n(n){return n&&n instanceof Object&&"function"==typeof n.then}function e(t,r,i){try{var c=i?i(r):r;if(t===c)return t.reject(new TypeError("Promise resolution loop"));n(c)?c.then(function(n){e(t,n)},function(n){t.reject(n)}):t.resolve(c)}catch(n){t.reject(n)}}function t(){}function r(n){}function i(n,e){this.resolve=n,this.reject=e}function c(r,i){var c=new t;try{this._resolver(function(t){return n(t)?t.then(r,i):e(c,t,r)},function(n){e(c,n,i)})}catch(n){e(c,n,i)}return c}function o(n){this._resolver=n,this.then=c}return t.prototype={resolve:r,reject:r,then:i},o.resolve=function(n){return o.isThenable(n)?n:{then:function(e){return e(n)}}},o.isThenable=n,o}(),$asyncbind.EagerThenable=$asyncbind.Thenable=($asyncbind.EagerThenableFactory=function(n){function e(n){if(n){var e=this;n(function(n){e.resolve(n)},function(n){e.reject(n)})}}function t(n,e){if("function"==typeof n.y)try{var t=n.y.call(void 0,e);n.p.resolve(t)}catch(e){n.p.reject(e)}else n.p.resolve(e)}function r(n,e){if("function"==typeof n.n)try{var t=n.n.call(void 0,e);n.p.resolve(t)}catch(e){n.p.reject(e)}else n.p.reject(e)}n=n||"object"==typeof process&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,0)};var i=function(){function e(){for(;t.length-r;)t[r](),t[r++]=void 0,r===i&&(t.splice(0,i),r=0)}var t=[],r=0,i=1024;return function(i){t.push(i),t.length-r===1&&n(e)}}();return e.prototype={resolve:function(n){if(void 0===this.state){if(n===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(n&&("function"==typeof n||"object"==typeof n))try{var r=0,c=n.then;if("function"==typeof c)return void c.call(n,function(n){r++||e.resolve(n)},function(n){r++||e.reject(n)})}catch(n){return void(r||this.reject(n))}this.state=t,this.v=n,e.c&&i(function(){for(var r=0,i=e.c.length;r<i;r++)t(e.c[r],n)})}},reject:function(n){if(void 0===this.state){this.state=r,this.v=n;var e=this.c;e&&i(function(){for(var t=0,i=e.length;t<i;t++)r(e[t],n)})}},then:function(n,t){var r=new e,c={y:n,n:t,p:r};if(void 0===this.state)this.c?this.c.push(c):this.c=[c];else{var o=this.state,a=this.v;i(function(){o(c,a)})}return r}},e.resolve=function(n){if(n&&n instanceof e)return n;var t=new e;return t.resolve(n),t},e.reject=function(n){if(n&&n instanceof e)return n;var t=new e;return t.reject(n),t},e.version="2.3.2-nodent",e})());var r=this;switch(e){case!0:return new $asyncbind.Thenable(t);case 0:return new $asyncbind.LazyThenable(t);case void 0:return t.then=t,t;default:return function(){try{return r.apply(n,arguments)}catch(n){return e(n)}}}}function $asyncspawn(n,e){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:$asyncspawn,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var t=this;return new n(function(n,r){function i(e,t){var o;try{if(o=e.call(c,t),o.done){if(o.value!==n){if(o.value&&o.value===o.value.then)return o.value(n,r);n&&n(o.value),n=null}return}o.value.then?o.value.then(function(n){i(c.next,n)},function(n){i(c.throw,n)}):i(c.next,o.value)}catch(n){return r&&r(n),void(r=null)}}var c=t.call(e,n,r);i(c.next)})}}$asyncbind(),$asyncspawn(),module.exports={$asyncbind:$asyncbind,$asyncspawn:$asyncspawn};